[
~[tlist_sql;
	SELECT 
        U_CDOL_STAFF_CHANGES.id,
		U_CDOL_STAFF_CHANGES.schoolid, 
		U_CDOL_STAFF_CHANGES.yearid,
		U_CDOL_STAFF_CHANGES.title, 
		U_CDOL_STAFF_CHANGES.first_name, 
		U_CDOL_STAFF_CHANGES.middle_name, 
		U_CDOL_STAFF_CHANGES.last_name,
		U_CDOL_STAFF_CHANGES.preferred_name,
		U_CDOL_STAFF_CHANGES.gender,
		U_CDOL_STAFF_CHANGES.personal_email,
		U_CDOL_STAFF_CHANGES.staff_type,
		U_CDOL_STAFF_CHANGES.position,
		U_CDOL_STAFF_CHANGES.replacing,
		U_CDOL_STAFF_CHANGES.start_date,
		U_CDOL_STAFF_CHANGES.previous,
		U_CDOL_STAFF_CHANGES.previous_employer,
		U_CDOL_STAFF_CHANGES.previous_employer_other,
		U_CDOL_STAFF_CHANGES.submission_date,
		U_CDOL_STAFF_CHANGES.who_submitted,
		U_CDOL_STAFF_CHANGES.ps_created,
		U_CDOL_STAFF_CHANGES.ad_created
    FROM U_CDOL_STAFF_CHANGES
	WHERE U_CDOL_STAFF_CHANGES.yearid = ~(gpv.curYearId)
	~[if.is.a.school] AND U_CDOL_STAFF_CHANGES.schoolid=~(gpv.curSchoolId) [/if]
	ORDER BY U_CDOL_STAFF_CHANGES.submission_date DESC, U_CDOL_STAFF_CHANGES.last_name
;]
	{
		"staffid":"~(staffid)",
		"schoolid":"~(schoolid)",
		"yearid":"~(yearid)",
		"title":"~(title;JSON)",
		"first_name":"~(first_name;JSON)",
		"middle_name":"~(middle_name;JSON)",
		"preferred_name":"~(preferred_name;JSON)",
		"gender":"~(gender;JSON)",
		"personal_email":"~(personal_email;JSON)",
		"staff_type":"~(staff_type;JSON)",
		"position":"~(position;JSON)",
		"start_date":"~(start_date)",
		"previous":"~(previous;JSON)",
		"previous_employer":"~(previous_employer;JSON)",
		"previous_employer_other":"~(previous_employer_other;JSON)",
		"submission_date":"~(submission_date)",
		"who_submitted":"~(who_submitted;JSON)",
		"ps_created":"~(ps_created;JSON)",
		"ad_created":"~(ad_created;JSON)"
	},
[/tlist_sql]
{}]